# This file is generated by taro.
# This and ErrorType are a starting point for unified error presentation.
# You can use them to render errors from various sources (ActiveRecord etc.)
# and render error responses in rescue_from in a consistent way.
# You can customize these files to fit your needs, or delete them.
class ErrorsType < Taro::Types::ListType
  self.item_type = ErrorType

  def coerce_input
    input_error 'ErrorsType cannot be used as input type'
  end

  def coerce_response
    case object.class.name
    when 'ActiveRecord::Base'
      super(object.errors.errors)
    when 'ActiveModel::Errors'
      super(object.errors)
    when 'Hash', 'Interactor::Context'
      super(object[:errors])
    else # e.g. Array
      super(object)
    end
  end
end
